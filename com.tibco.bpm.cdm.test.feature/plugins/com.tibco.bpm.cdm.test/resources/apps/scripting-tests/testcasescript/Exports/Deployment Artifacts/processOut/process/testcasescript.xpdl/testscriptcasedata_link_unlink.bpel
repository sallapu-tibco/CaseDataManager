<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="testscriptcasedata_link_unlink" suppressJoinFailure="yes"
    tibex:bxVersion="11.0.0"
    tibex:dataFieldDescriptorClass="com.example.testcasescript.testcasescript.testscriptcasedata_link_unlink"
    tibex:dataFieldDescriptorScript="process-js/testcasescript/testscriptcasedata_link_unlink/testscriptcasedata_link_unlink.js"
    tibex:explicitCompensation="yes"
    tibex:xpdlId="_iUXjQrnHEem7RYemWV-Nng"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="LinkSingleCase">
            <startingVariables>
                <variable>accountCase</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="UnlinkAllByLinkName">
            <startingVariables>
                <variable>accountCases</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="UnlinkSingleCase">
            <startingVariables>
                <variable>accountCase</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="UnlinkMultipleCases">
            <startingVariables>
                <variable>accountCasesSubset</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="CreateaSmallerAccountCasesArrayScript">
            <startingVariables>
                <variable>accountCasesSubset</variable>
                <variable>accountCases</variable>
            </startingVariables>
        </task>
        <task name="ScriptCreateMultipleAccounts">
            <startingVariables>
                <variable>accountBOM</variable>
                <variable>accountBOMs</variable>
            </startingVariables>
        </task>
        <task name="ScriptLinkandNavigateLinkedCases">
            <startingVariables>
                <variable>navigatedAccountsBySearch</variable>
                <variable>navigatedAllAccounts</variable>
                <variable>navigatedAccountsByCriteria</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="CreateSingleCustomer">
            <startingVariables>
                <variable>customerBOM</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="CreateMultipleAccounts">
            <startingVariables>
                <variable>accountCases</variable>
                <variable>accountBOMs</variable>
            </startingVariables>
        </task>
        <task name="ScriptUnlinkandNavigateUnlinkedCases">
            <startingVariables>
                <variable>navigateUnlinkedAccounts</variable>
                <variable>accountCases</variable>
                <variable>accountCase</variable>
                <variable>navigateUnlinkedCustomer</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
        <task name="ScriptCreateSingleCustomer">
            <startingVariables>
                <variable>customerBOM</variable>
            </startingVariables>
        </task>
        <task name="LinkMultipleCases">
            <startingVariables>
                <variable>accountCases</variable>
                <variable>customerCase</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:variables>
        <bpws:variable name="accountCasesSearch" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA06zLquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCasesFindAll" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA06zbquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCasesFindByMultiCriteria"
            tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA06zrquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountBOMs" tibex:array="yes"
            tibex:class="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA06z7quEemiap_fx2MOIQ"/>
        <bpws:variable name="accountBOMRead"
            tibex:class="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA060LquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCases" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA060bquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountBOMsRead" tibex:array="yes"
            tibex:class="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA060rquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCase"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA0607quEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCasesFindByCriteria"
            tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA061LquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCasesFindByCriteriaPaginated"
            tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA061bquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountCasesSearchPaginated"
            tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA061rquEemiap_fx2MOIQ"/>
        <bpws:variable name="accountBOM"
            tibex:class="com.example.testcasedatascripting.Account" tibex:xpdlId="_MA0617quEemiap_fx2MOIQ"/>
        <bpws:variable name="customerBOM"
            tibex:class="com.example.testcasedatascripting.Customer" tibex:xpdlId="_fcMKcLqyEemiap_fx2MOIQ"/>
        <bpws:variable name="customerCase"
            tibex:classRef="com.example.testcasedatascripting.Customer" tibex:xpdlId="_idtasLqyEemiap_fx2MOIQ"/>
        <bpws:variable name="navigatedAllAccounts" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_Lkvv0Lq7Eemiap_fx2MOIQ"/>
        <bpws:variable name="navigatedAccountsByCriteria"
            tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_T2XnwLq7Eemiap_fx2MOIQ"/>
        <bpws:variable name="navigatedAccountsBySearch"
            tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_Xr5u4Lq7Eemiap_fx2MOIQ"/>
        <bpws:variable name="accountCasesSubset" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_OdePQL0SEem1XMMziRI13w"/>
        <bpws:variable name="navigateUnlinkedCustomer" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Customer" tibex:xpdlId="_W-YD4L0TEem1XMMziRI13w"/>
        <bpws:variable name="navigateUnlinkedAccounts" tibex:array="yes"
            tibex:classRef="com.example.testcasedatascripting.Account" tibex:xpdlId="_5KRsgL0TEem1XMMziRI13w"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_cKVOgNZFEemLg4LTGyRnrQ">
        <bpws:links>
            <bpws:link name="UnlinkMultipleCases to UnlinkAllByLinkName" tibex:xpdlId="_7iqnkL0QEem1XMMziRI13w"/>
            <bpws:link
                name="UnlinkAllByLinkName to _TZw1AL0QEem1XMMziRI13w" tibex:xpdlId="_8CjBgL0QEem1XMMziRI13w"/>
            <bpws:link
                name="ScriptCreateSingleCustomer to CreateSingleCustomer" tibex:xpdlId="_6k-ScLquEemiap_fx2MOIQ"/>
            <bpws:link name="CreateSingleCustomer to LinkSingleCase" tibex:xpdlId="_7bviYbquEemiap_fx2MOIQ"/>
            <bpws:link
                name="_7bviYLquEemiap_fx2MOIQ to UnlinkSingleCase" tibex:xpdlId="_vzPzE70QEem1XMMziRI13w"/>
            <bpws:link name="LinkSingleCase to LinkMultipleCases" tibex:xpdlId="_AaLU07q7Eemiap_fx2MOIQ"/>
            <bpws:link
                name="LinkMultipleCases to _7bviYLquEemiap_fx2MOIQ" tibex:xpdlId="_TZw1Ab0QEem1XMMziRI13w"/>
            <bpws:link
                name="_HQm_8L0SEem1XMMziRI13w to UnlinkMultipleCases" tibex:xpdlId="_I9QH8L0SEem1XMMziRI13w"/>
            <bpws:link
                name="ScriptCreateMultipleAccounts to CreateMultipleAccounts" tibex:xpdlId="_RmimFrquEemiap_fx2MOIQ"/>
            <bpws:link
                name="CreateMultipleAccounts to ScriptCreateSingleCustomer" tibex:xpdlId="_4Ioy4bquEemiap_fx2MOIQ"/>
            <bpws:link name="_TZw1AL0QEem1XMMziRI13w to EndEvent" tibex:xpdlId="_9LDj4bquEemiap_fx2MOIQ"/>
            <bpws:link name="StartEvent to ScriptCreateMultipleAccounts" tibex:xpdlId="_iUXjRbnHEem7RYemWV-Nng"/>
            <bpws:link
                name="UnlinkSingleCase to _HQm_8L0SEem1XMMziRI13w" tibex:xpdlId="_8S07Y7quEemiap_fx2MOIQ"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_iUXjQ7nHEem7RYemWV-Nng" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to ScriptCreateMultipleAccounts"/>
                </bpws:sources>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_iUXjRLnHEem7RYemWV-Nng">
            <bpws:targets>
                <bpws:target linkName="_TZw1AL0QEem1XMMziRI13w to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptCreateMultipleAccounts"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_RmimELquEemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartEvent to ScriptCreateMultipleAccounts"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ScriptCreateMultipleAccounts to CreateMultipleAccounts"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[//setting data for first account case
data.accountBOM = factory.com_example_testcasedatascripting.createAccount();
data.accountBOM.accountBalance = 100.12;
data.accountBOM.accountInstitution = "HSBC Bank Plc";
//data.accountBOM.accountOpened = new Date().now();
//data.accountBOM.accountOpened = new Date('1992-01-01');
//Temporarily commented - ACE-2330
//data.accountBOM.accountOpened = new Date();
data.accountBOM.accountOpened.setFullYear(1992);
data.accountBOM.accountOpened.setMonth(0);
data.accountBOM.accountOpened.setDate(1);
data.accountBOM.accountOpened.setHours(1);
data.accountBOM.accountOpened.setMinutes(1);
data.accountBOM.accountOpened.setSeconds(1);
data.accountBOM.accountOpened.setMilliseconds(100);
//Temporarily commented - ACE-2330
//data.accountBOM.accountLastAccessed = new Date();
data.accountBOM.accountLastAccessed.setFullYear(2018);
data.accountBOM.accountLastAccessed.setMonth(0);
data.accountBOM.accountOpened.setDate(1);
data.accountBOM.accountOpened.setHours(1);
data.accountBOM.accountOpened.setMinutes(1);
data.accountBOM.accountOpened.setSeconds(1);
data.accountBOM.accountOpened.setMilliseconds(100);
data.accountBOM.accountStatus = pkg.com_example_testcasedatascripting.AccountStatus.ACTIVE;
data.accountBOM.accountType = pkg.com_example_testdata_outside_global.AccountType.SAVINGS;
data.accountBOM.institutionAddress = factory.com_example_testcasedatascripting.createAddress();
data.accountBOM.institutionAddress.firstLine = "case 1 line 1";
data.accountBOM.institutionAddress.secondLine = "case 1 line 2";
data.accountBOM.institutionAddress.city = "case 1 city 1";
data.accountBOM.institutionAddress.county = "case 1 county 1";
data.accountBOM.institutionAddress.country = "case 1 country 1";
data.accountBOM.institutionAddress.postcode = "SN1 5AP";
//create account case
//data.accountCase = bpm.caseData.create(data.accountBOM,'com.example.testcasedatascripting.Account');
//second case
var account1 = factory.com_example_testcasedatascripting.createAccount();
account1.accountBalance = 0.12;
account1.accountInstitution = "Nutmeg";
//account1.accountOpened = new Date();
account1.accountOpened.setFullYear(1993);
account1.accountOpened.setMonth(0);
account1.accountOpened.setDate(1);
account1.accountOpened.setHours(1);
account1.accountOpened.setMinutes(1);
account1.accountOpened.setSeconds(1);
account1.accountOpened.setMilliseconds(100);
//account1.accountLastAccessed = new Date();"
account1.accountLastAccessed.setFullYear(2019);
account1.accountLastAccessed.setMonth(0);
account1.accountOpened.setDate(1);
account1.accountOpened.setHours(1);
account1.accountOpened.setMinutes(1);
account1.accountOpened.setSeconds(1);
account1.accountOpened.setMilliseconds(100);
account1.accountStatus = pkg.com_example_testcasedatascripting.AccountStatus.DORMANT;
account1.accountType = pkg.com_example_testdata_outside_global.AccountType.INVESTMENT;
account1.institutionAddress = factory.com_example_testcasedatascripting.createAddress();
account1.institutionAddress.firstLine = "case 2 line 1";
account1.institutionAddress.secondLine = "case 2 line 2";
account1.institutionAddress.city = "case 2 city 1";
account1.institutionAddress.county = "case 2 county 1";
account1.institutionAddress.country = "case 2 country 1";
account1.institutionAddress.postcode = "SN2 6AP";
//third case
var account2 = factory.com_example_testcasedatascripting.createAccount();
account2.accountBalance = 2000.56;
account2.accountInstitution = "Nationwide Building Society";
account2.accountOpened.setFullYear(1994);
account2.accountOpened.setMonth(0);
account2.accountOpened.setDate(1);
account2.accountOpened.setHours(1);
account2.accountOpened.setMinutes(1);
account2.accountOpened.setSeconds(1);
account2.accountOpened.setMilliseconds(100);
account2.accountLastAccessed.setFullYear(2019);
account2.accountLastAccessed.setMonth(0);
account2.accountOpened.setDate(1);
account2.accountOpened.setHours(1);
account2.accountOpened.setMinutes(1);
account2.accountOpened.setSeconds(1);
account2.accountOpened.setMilliseconds(100);
account2.accountStatus = pkg.com_example_testcasedatascripting.AccountStatus.DORMANT;
account2.accountType = pkg.com_example_testdata_outside_global.AccountType.FIXEDDEPOSIT;
account2.institutionAddress = factory.com_example_testcasedatascripting.createAddress();
account2.institutionAddress.firstLine = "case 3 line 1";
account2.institutionAddress.secondLine = "case 3 line 2";
account2.institutionAddress.city = "case 3 city 1";
account2.institutionAddress.county = "case 3 county 1";
account2.institutionAddress.country = "case 3 country 1";
account2.institutionAddress.postcode = "SN3 7AP";
//fourth case
var account3 = factory.com_example_testcasedatascripting.createAccount();
account3.accountBalance = 546.56;
account3.accountInstitution = "Nutmeg";
account3.accountOpened.setFullYear(1995);
account3.accountOpened.setMonth(0);
account3.accountOpened.setDate(1);
account3.accountOpened.setHours(1);
account3.accountOpened.setMinutes(1);
account3.accountOpened.setSeconds(1);
account3.accountOpened.setMilliseconds(100);
account3.accountLastAccessed.setFullYear(2019);
account3.accountLastAccessed.setMonth(0);
account3.accountOpened.setDate(1);
account3.accountOpened.setHours(1);
account3.accountOpened.setMinutes(1);
account3.accountOpened.setSeconds(1);
account3.accountOpened.setMilliseconds(100);
account3.accountStatus = pkg.com_example_testcasedatascripting.AccountStatus.TOBETERMINATED;
account3.accountType = pkg.com_example_testdata_outside_global.AccountType.CURRENT;
account3.institutionAddress = factory.com_example_testcasedatascripting.createAddress();
account3.institutionAddress.firstLine = "case 4 line 1";
account3.institutionAddress.secondLine = "case 4 line 2";
account3.institutionAddress.city = "case 4 city 1";
account3.institutionAddress.county = "case 4 county 1";
account3.institutionAddress.country = "case 4 country 1";
account3.institutionAddress.postcode = "SN5 8AP";
data.accountBOMs.push(account1, account2, account3);
//create account cases
//data.accountCases = bpm.caseData.createAll(data.accountBOMs,'com_example_testcasedatascripting.Account');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="CreateMultipleAccounts"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_RmimEbquEemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="ScriptCreateMultipleAccounts to CreateMultipleAccounts"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="CreateMultipleAccounts to ScriptCreateSingleCustomer"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[data.accountCases.length=0;data.accountCases.pushAll(bpm.caseData.createAll(data.accountBOMs,'com.example.testcasedatascripting.Account'));]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptCreateSingleCustomer"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_4Ioy4LquEemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="CreateMultipleAccounts to ScriptCreateSingleCustomer"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ScriptCreateSingleCustomer to CreateSingleCustomer"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[//setting data for first account case
data.customerBOM = factory.com_example_testcasedatascripting.createCustomer();
data.customerBOM.customerID = 'ID0001';
data.customerBOM.age = 30.25;
data.customerBOM.dateofBirth = new Date('1989-01-01');
data.customerBOM.customerCategory = pkg.com_example_testcasedatascripting.CustomerCategory.MEDIUMACTIVITY;
data.customerBOM.residentialAddress = factory.com_example_testcasedatascripting.createAddress();
data.customerBOM.residentialAddress.firstLine = 'customer 1 line 1';
data.customerBOM.residentialAddress.secondLine = 'customer 1 line 2';
data.customerBOM.residentialAddress.city = 'customer 1 city 1';
data.customerBOM.residentialAddress.county = 'customer 1 county 1';
data.customerBOM.residentialAddress.country = 'customer 1 country 1';
data.customerBOM.residentialAddress.postcode = 'SN1 5AP';
var employmentDetails1 = factory.com_example_testdata_outside_global.createEmploymentDetails();
var employmentDetails2 = factory.com_example_testdata_outside_global.createEmploymentDetails();
employmentDetails1.employeeID = '1001';
employmentDetails1.employmentStatus= pkg.com_example_testdata_outside_global.EmploymentStatus.FULLTIMESALARIED;
employmentDetails1.numberofyears = 5;
employmentDetails1.yearlyRenumeration = 12345.12;
employmentDetails2.employeeID = '1002';
employmentDetails2.employmentStatus= pkg.com_example_testdata_outside_global.EmploymentStatus.PARTTIMESALARIED;
employmentDetails2.numberofyears = 1;
employmentDetails2.yearlyRenumeration = 45.12;
data.customerBOM.employmentDetails.push(employmentDetails1, employmentDetails2);
//data.customerCase = bpm.caseData.create(data.customerBOM,'com.example.testcasedatascripting.Customer');
]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="CreateSingleCustomer"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_6k9rYLquEemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="ScriptCreateSingleCustomer to CreateSingleCustomer"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="CreateSingleCustomer to LinkSingleCase"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[data.customerCase = bpm.caseData.create(data.customerBOM,'com.example.testcasedatascripting.Customer');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptLinkandNavigateLinkedCases"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_7bviYLquEemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="LinkMultipleCases to _7bviYLquEemiap_fx2MOIQ"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="_7bviYLquEemiap_fx2MOIQ to UnlinkSingleCase"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[//bpm.caseData.link(data.customerCase, data.accountCase,'accounts');
//bpm.caseData.linkAll(data.customerCase, data.accountCases,'accounts');
var accountRead0 = factory.com_example_testcasedatascripting.createAccount();
var accountRead1 = factory.com_example_testcasedatascripting.createAccount();
data.navigatedAllAccounts.pushAll(bpm.caseData.navigateAll(data.customerCase,'accounts',0,2));
var lengthNavigatedAllPaginated = data.navigatedAllAccounts.length; //2
accountRead0 = bpm.caseData.read(data.navigatedAllAccounts[0]);
accountRead1 = bpm.caseData.read(data.navigatedAllAccounts[1]);
var accountRead2 = factory.com_example_testcasedatascripting.createAccount();
var accountRead3 = factory.com_example_testcasedatascripting.createAccount();
data.navigatedAccountsByCriteria.pushAll(bpm.caseData.navigateByCriteria(data.customerCase,'accounts',"accountLastAccessed = 2019-01-01T00:01:01.100Z and accountInstitution = 'Nutmeg'", 0, 3));
var lengthNavigatedAccountsByCriteria = data.navigatedAccountsByCriteria.length; //2
accountRead2 = bpm.caseData.read(data.navigatedAccountsByCriteria[0]);
accountRead3 = bpm.caseData.read(data.navigatedAccountsByCriteria[1]);
var accountRead4 = factory.com_example_testcasedatascripting.createAccount();
data.navigatedAccountsBySearch.pushAll(bpm.caseData.navigateBySimpleSearch(data.customerCase,'accounts','FIXEDDEPOSIT', 0, 5));
var lengthNavigatedAccountsBySearch = data.navigatedAccountsBySearch.length; //1
accountRead4 = bpm.caseData.read(data.navigatedAccountsBySearch[0]);]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="LinkSingleCase"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_8S07YLquEemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="CreateSingleCustomer to LinkSingleCase"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="LinkSingleCase to LinkMultipleCases"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[bpm.caseData.link(data.customerCase,data.accountCase,'accounts');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="LinkMultipleCases"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_AaLU0Lq7Eemiap_fx2MOIQ" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="LinkSingleCase to LinkMultipleCases"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="LinkMultipleCases to _7bviYLquEemiap_fx2MOIQ"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[bpm.caseData.linkAll(data.customerCase,data.accountCases,'accounts');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity
                name="ScriptUnlinkandNavigateUnlinkedCases"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_TZw1AL0QEem1XMMziRI13w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="UnlinkAllByLinkName to _TZw1AL0QEem1XMMziRI13w"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="_TZw1AL0QEem1XMMziRI13w to EndEvent"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[//bpm.caseData.unlink(data.customerCase, data.accountCase,'accounts');
//bpm.caseData.unlinkAll(data.customerCase, data.accountCasesSubset,'accounts');
//bpm.caseData.unlinkAllByLinkName(data.customerCase, 'accounts');
data.navigateUnlinkedAccounts.length = 0;
data.navigateUnlinkedAccounts.pushAll(bpm.caseData.navigateAll(data.customerCase,'accounts',0,2));
var lengthNavigateUnlinkedAccount = data.navigateUnlinkedAccounts.length; //0

data.navigateUnlinkedCustomer.length = 0;
data.navigateUnlinkedCustomer.pushAll(bpm.caseData.navigateAll(data.accountCase,'customer',0,2));
for(var i=0; i<data.accountCases.length; i++)
{
	data.navigateUnlinkedCustomer.pushAll(bpm.caseData.navigateAll(data.accountCases[i],'customer',0,2));
}
var lengthNavigateUnlinkedCustomer = data.navigateUnlinkedCustomer.length; //0]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="UnlinkSingleCase"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_vzPzEL0QEem1XMMziRI13w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_7bviYLquEemiap_fx2MOIQ to UnlinkSingleCase"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="UnlinkSingleCase to _HQm_8L0SEem1XMMziRI13w"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[bpm.caseData.unlink(data.customerCase,data.accountCase,'accounts');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="UnlinkMultipleCases"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_153MAL0QEem1XMMziRI13w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_HQm_8L0SEem1XMMziRI13w to UnlinkMultipleCases"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="UnlinkMultipleCases to UnlinkAllByLinkName"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[bpm.caseData.unlinkAll(data.customerCase,data.accountCasesSubset,'accounts');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="UnlinkAllByLinkName"
                tibex:migrationAllowed="yes" tibex:type="serviceTask"
                tibex:xpdlId="_2muSAL0QEem1XMMziRI13w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="UnlinkMultipleCases to UnlinkAllByLinkName"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="UnlinkAllByLinkName to _TZw1AL0QEem1XMMziRI13w"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[bpm.caseData.unlinkAll(data.customerCase,data.accountCases,'accounts');]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity
                name="CreateaSmallerAccountCasesArrayScript"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_HQm_8L0SEem1XMMziRI13w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="UnlinkSingleCase to _HQm_8L0SEem1XMMziRI13w"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="_HQm_8L0SEem1XMMziRI13w to UnlinkMultipleCases"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[data.accountCasesSubset.length = 0;
data.accountCasesSubset.push(data.accountCases[0]);
data.accountCasesSubset.push(data.accountCases[1]);]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
    </bpws:flow>
</bpws:process>
